<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Satisfação</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h1>Histórico de respostas</h1>

<table border="1">
<tr><th>Nível</th><th>Data/Hora</th></tr>
{% for d in dados %}
<tr>
<td>{{ d[0] }}</td>
<td>{{ d[1] }}</td>
</tr>
{% endfor %}
</table>

<h2>Resumo</h2>
<canvas id="grafico" width="400" height="200"></canvas>

<script>
var ctx = document.getElementById('grafico').getContext('2d');
var chart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ["Muito Satisfeito", "Satisfeito", "Insatisfeito"],
        datasets: [{
            label: 'Número de respostas',
            data: [{{ totais['Muito Satisfeito'] }}, {{ totais['Satisfeito'] }}, {{ totais['Insatisfeito'] }}],
            backgroundColor: ['#4caf50','#ffeb3b','#f44336']
        }]
    },
    options: {responsive:true, maintainAspectRatio:false}
});
</script>
</body>
</html>
